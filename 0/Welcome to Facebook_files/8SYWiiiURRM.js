if (self.CavalryLogger) { CavalryLogger.start_js(["QZfvz"]); }

__d("MLoginFormSigils",[],(function a(b,c,d,e,f,g){f.exports={FORM:"m_login_form",BUTTON:"m_login_button",BUTTON_ALT:"m_login_button_alt",NOTICE:"m_login_notice",LOGIN_MESSAGE:"m_login_message",UPSELL:"m_login_upsell",EMAIL_INPUT:"m_login_email",PASSWORD_INPUT:"m_login_password",TRY_NUMBER:"m_login_try_number"};}),null);
__d("MPasswordPlainTextToggleSigils",[],(function a(b,c,d,e,f,g){f.exports={INPUT:"password-plain-text-toggle-input",TOGGLE:"password-plain-text-toggle"};}),null);
__d('isLinkshimURI',['isFacebookURI','isMessengerDotComURI'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(k){var l=k.getPath();if((l==='/l.php'||l.indexOf('/si/ajax/l/')===0||l.indexOf('/l/')===0||l.indexOf('l/')===0)&&(h(k)||i(k)))return true;return false;}f.exports=j;}),null);
__d('KaiOSController',['Promise','EventEmitter','Map','URI','isLinkshimURI'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='app://m.facebook.com',n='callback_id',o='action',p='payload',q={APP_INFO:'app_info'},r={OPEN_URL:'open_url',REGISTER_PUSH:'register_push',UNREGISTER_PUSH:'unregister_push'},s=new j(),t=null,u=null,v=new h(function(ba,ca){u=ba;}),w=false;function x(ba){if(t&&ba)t.postMessage(ba,'*');}function y(ba){if(!(ba instanceof j))return;var ca=ba.get(o),da=ba.get(p),ea=ba.get(n);if(ea){var fa=s.get(ea);if(fa){s['delete'](ea);fa(da);}return;}switch(ca){case q.APP_INFO:if(da&&da.get){aa.appVersion=da.get('app_version');if(w)window.addEventListener('click',z,true);}break;}}function z(ba){var ca=ba.target;if(ca&&ca.tagName==='A'){var da=ca.href;if(l(new k(da))){aa.openUrl(da);ba.preventDefault();ba.stopPropagation();}}}var aa={appVersion:null,init:function ba(ca){w=!!ca.get('open_links_in_app');window.addEventListener('message',aa.receiveMessage,false);},waitForKaiOS:function ba(){return v;},registerPush:function ba(ca){var da=Math.random().toString();s.set(da,ca);var ea=new j();ea.set(o,r.REGISTER_PUSH);ea.set(n,da);x(ea);},unregisterPush:function ba(){aa.waitForKaiOS().done(function(){var ca=new j();ca.set(o,r.UNREGISTER_PUSH);x(ca);});},openUrl:function ba(ca){var da=new j(),ea=new j();da.set(o,r.OPEN_URL);da.set(p,ea);ea.set('url',ca);x(da);},receiveMessage:function ba(event){if(!event||m!=event.origin||!event.source)return;if(u){u();u=null;}if(!t){t=event.source;x('received');}if(event.data)y(event.data);}};f.exports=aa;}),null);
__d('LoginNativeButton',['DOM','BanzaiLogger'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='native_login_button_click_client';f.exports={init:function k(l,m){h.listen(l,'click',null,function(n){this._logClick(m);}.bind(this));},_logClick:function k(l){var m=i.create({retry:true,delay:0});m.log('PlatformLoginOauthServerEventsLoggerConfig',{event:j,logger_id:l});}};}),null);
__d('MButton',['CSSCore','DOM','cx','invariant'],(function a(b,c,d,e,f,g,h,i,j,k){var l="_2347";function m(o){i.isType(o,'button')||i.isType(o,'a')||k(0);}var n={isEnabled:function o(p){m(p);return p.disabled===false||i.isType(p,'a')&&!h.hasClass(p,l);},setEnabled:function o(p,q){m(p);if(n.isEnabled(p)===q)return;if(i.isType(p,'button')){p.disabled=!q;}else{h.conditionClass(p,l,!q);if(q){p.removeAttribute('tabindex');p.removeAttribute('aria-disabled');}else{p.setAttribute('tabindex','-1');p.setAttribute('aria-disabled','true');}}}};f.exports=n;}),null);
__d('MLoginFormError',['CSS','DOM','Stratcom','cx','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m="_3qsy",n="_3qs-",o={set:function p(q,r){r!==null||l(0);h.addClass(q,m);h.addClass(q,n);i.listen(q,'input',null,function(s){h.removeClass(q,n);});},unset:function p(q){h.removeClass(q,m);h.removeClass(q,n);}};f.exports=o;}),null);
__d('TreeMap',['Map','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(x,y,z){this.key=x;this.value=y;this.time=z;}function k(x){this.$TreeMap1=function(y,z){var aa=x(y,z);return aa!==0?aa:y.time-z.time;};this.$TreeMap2=new h();this.$TreeMap3=null;this.$TreeMap4=0;this.size=this.$TreeMap2.size;}k.prototype.clear=function(){this.$TreeMap2=new h();this.$TreeMap3=null;this.size=this.$TreeMap2.size;};k.prototype.has=function(x){return this.$TreeMap2.has(x);};k.prototype.set=function(x,y){if(this.has(x))this['delete'](x);var z=new j(x,y,this.$TreeMap4++);this.$TreeMap2.set(x,z);this.$TreeMap3=r(this.$TreeMap3,z,this.$TreeMap1);this.size=this.$TreeMap2.size;return this;};k.prototype.get=function(x){return this.has(x)?this.$TreeMap2.get(x).value:undefined;};k.prototype['delete']=function(x){if(!this.has(x))return false;var y=this.$TreeMap2.get(x);this.$TreeMap3=s(this.$TreeMap3,y,this.$TreeMap1);this.$TreeMap2['delete'](x);this.size=this.$TreeMap2.size;return true;};k.prototype.keys=function(){var x=[];w(this.$TreeMap3,x,function(y){return y.key;});return x;};k.prototype.values=function(){var x=[];w(this.$TreeMap3,x,function(y){return y.value;});return x;};k.prototype.entries=function(){var x=[];w(this.$TreeMap3,x,function(y){return {key:y.key,value:y.value};});return x;};k.prototype.range=function(x,y){var z=[],aa=null;if(x)aa=new j(x.key,x.value,-1);var ba=null;if(y)ba=new j(y.key,y.value,this.$TreeMap4);w(this.$TreeMap3,z,function(ca){return {key:ca.key,value:ca.value};},this.$TreeMap1,aa,ba);return z;};k.prototype.min=function(){if(!this.$TreeMap3)return undefined;var x=t(i(this.$TreeMap3)),y=x.key,z=x.value;return {key:y,value:z};};k.prototype.max=function(){if(!this.$TreeMap3)return undefined;var x=u(i(this.$TreeMap3)),y=x.key,z=x.value;return {key:y,value:z};};k.prototype.__testRoot=function(){};function l(x){if(!x)return x;q(x);if(x.balanceFactor<-1){if(x.right&&x.right.balanceFactor<=0){return m(x);}else return n(x);}else if(x.balanceFactor>1){if(x.left&&x.left.balanceFactor>=0){return o(x);}else return p(x);}else return x;}function m(x){var y=x,z=i(y.right),aa=z.left;y.right=aa;q(y);i(z).left=y;q(z);return z;}function n(x){var y=x,z=i(y.right),aa=i(z.left),ba=aa.left,ca=aa.right;y.right=ba;q(y);z.left=ca;q(z);aa=i(aa);aa.left=y;aa.right=z;q(aa);return aa;}function o(x){var y=x,z=i(y.left),aa=z.right;y.left=aa;q(y);z.right=y;q(z);return z;}function p(x){var y=x,z=i(y.left),aa=i(z.right),ba=aa.left,ca=aa.right;z.right=ba;q(z);y.left=ca;q(y);aa.left=z;aa.right=y;q(aa);return aa;}function q(x){var y=x.left?x.left.height:-1,z=x.right?x.right.height:-1;x.height=Math.max(y,z)+1;x.balanceFactor=y-z;}function r(x,y,z){if(x==null)return l(y);var aa=z(y,x);if(aa<0){x.left=r(x.left,y,z);return l(x);}else{x.right=r(x.right,y,z);return l(x);}}function s(x,y,z){if(x==null)return null;if(x===y)if(x.left&&x.right){var aa=u(x.left);x.left=v(x.left);aa.left=x.left;aa.right=x.right;return l(aa);}else if(x.left){return l(x.left);}else if(x.right){return l(x.right);}else return null;var ba=z(y,x);if(ba<0){x.left=s(x.left,y,z);return l(x);}else{x.right=s(x.right,y,z);return l(x);}}function t(x){while(x.left)x=x.left;return x;}function u(x){while(x.right)x=x.right;return x;}function v(x){if(!x)return null;if(x.right==null)return l(x.left||null);x.right=v(x.right);return l(x);}function w(x,y,z,aa,ba,ca){if(x==null)return;var da=!aa||!ba||aa(x,ba)>=0,ea=!aa||!ca||aa(x,ca)<=0;if(da)w(x.left,y,z,aa,ba,ca);if(da&&ea)y.push(z(x));if(ea)w(x.right,y,z,aa,ba,ca);}f.exports=k;}),null);
__d('Cache',['DateConsts','Map','TreeMap'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(){this.$Cache1=new i();}k.prototype.has=function(l){return this.$Cache1.has(l);};k.prototype.get=function(l,m){var n=this.__getRaw(l);if(!n)return m;return n.$Cache2;};k.prototype.getAll=function(l,m){var n=new i();l.forEach(function(o){return n.set(o,this.get(o,m));}.bind(this));return n;};k.prototype['delete']=function(l){var m=this.__getRaw(l);if(m&&m.$Cache3)clearTimeout(m.$Cache3);return this.$Cache1['delete'](l);};k.prototype.clear=function(){this.$Cache1.forEach(function(l){if(l&&l.$Cache3)clearTimeout(l.$Cache3);});this.$Cache1.clear();};k.prototype.set=function(l,m,n,o){if(!this.shouldUpdate(l,n))return false;var p=this.__getRaw(l);if(!p)p=this.__getNewRawObject();delete p.$Cache2;delete p.$Cache4;if(p.$Cache3)clearTimeout(p.$Cache3);delete p.$Cache3;p.$Cache2=m;if(n!=null)p.$Cache4=n;if(o!=null&&o>=0)p.$Cache3=setTimeout(this['delete'].bind(this,l),o*h.MS_PER_SEC*h.SEC_PER_MIN);this.__setRaw(l,p);return true;};k.prototype.shouldUpdate=function(l,m){var n=this.__getRaw(l);return n==null||n.$Cache4==null||m==null||m>n.$Cache4;};k.prototype.size=function(){return this.$Cache1.size;};k.prototype.__getRaw=function(l){return this.$Cache1.get(l);};k.prototype.__setRaw=function(l,m){this.$Cache1.set(l,m);};k.prototype.__getNewRawObject=function(){return {$Cache2:null,$Cache3:null,$Cache4:null,$Cache5:null,$Cache6:null};};k.prototype.__keys=function(){return this.$Cache1.keys();};f.exports=k;}),null);
__d('QE',['Banzai','Cache'],(function a(b,c,d,e,f,g,h,i){var j='qe_log_exposure',k=60,l=new i(),m={logExposure:function n(o,p){var q=p?o+'|'+p:o;if(l.has(q))return;var r={signal:true},s={name:o,id:null};if(p)s.id=p;h.post(j,s,r);l.set(q,true,1,k);}};f.exports=m;}),null);
__d('MLoginController',['CSS','cx','DOM','DeferredCookie','Stratcom','MAjaxify','MButton','MLoginFormError','MLoginFormSigils','MPasswordPlainTextToggleSigils','Keys','goURI'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t="_pg8",u={initLoginForm:function v(w){var x=w.root;this.loginForm=j.find(x,'form',p.FORM);this.loginForm.action=w.ajaxURI;this.loginButton=j.find(x,'button',p.BUTTON);var y=j.scry(x,'a',p.BUTTON_ALT);y=y.pop();this.loginButtonAlt=null;if(y!==undefined)this.loginButtonAlt=y;this.loginButton.type='button';this.notice=j.find(x,'div',p.NOTICE);this.loginMessage=this._getElem(x,'div',p.LOGIN_MESSAGE);this.emailInput=this._getElem(x,'input',p.EMAIL_INPUT);this.passwordInput=this._getElem(x,'div',p.PASSWORD_INPUT);this.tryNumber=this._getElem(x,'input',p.TRY_NUMBER);this.upsell=this._getElem(x,'div',p.UPSELL);this.numPasswordErrorAttempts=0;this.rapidFeedbackUri=w.rapidFeedbackUri;j.listen(this.loginButton,'click',null,this._sendLoginRequest.bind(this));if(this.loginButtonAlt!==null)j.listen(this.loginButtonAlt,'click',null,this._sendLoginRequest.bind(this));var z=w.listenKeyDown?'keydown':'keyup';j.listen(this.loginForm,z,null,function(aa){if(aa.getRawEvent().keyCode===r.RETURN)this._sendLoginRequest();}.bind(this));if(w.clearOnDelete)j.listen(this.emailInput,z,null,function(aa){if(aa.getRawEvent().keyCode===r.BACKSPACE)this.emailInput.value='';}.bind(this));},_getElem:function v(w,x,y){var z=j.scry(w,x,y);if(z.length===0)return null;return z[0];},_autoFocusIfNeeded:function v(w){if(!this.emailInput||!this.passwordInput)return;var x=j.find(this.passwordInput,'input');if(!x)return;var y=this.emailInput.value===''||w[p.EMAIL_INPUT].error,z=x.value===''||w[p.PASSWORD_INPUT].error;if(y||z)if(y){this.emailInput.focus();}else if(z)x.focus();},_sendLoginRequest:function v(){k.flushAllCookies();h.hide(this.notice);if(this.loginMessage)h.show(this.loginMessage);n.setEnabled(this.loginButton,false);setTimeout(n.setEnabled.bind(null,this.loginButton,true),15000);if(this.loginButtonAlt!==null){n.setEnabled(this.loginButtonAlt,false);setTimeout(n.setEnabled.bind(null,this.loginButtonAlt,true),15000);}if(this.tryNumber!==null)this.tryNumber.setAttribute('value',this.numPasswordErrorAttempts);m.form(null,this.loginForm,null,'nocache',null,true,[{response:this._onLoginResponse.bind(this)}]);},_onLoginResponse:function v(w){n.setEnabled(this.loginButton,true);if(this.loginButtonAlt!==null)n.setEnabled(this.loginButtonAlt,true);if(!w.payload)return;var x=w.payload;if(x[p.PASSWORD_INPUT].error){this.numPasswordErrorAttempts++;}else this.numPasswordErrorAttempts=0;if(this.rapidFeedbackUri&&this.numPasswordErrorAttempts==2)s(this.rapidFeedbackUri);if(this.loginMessage)h.hide(this.loginMessage);if(x[p.NOTICE]){j.setContent(this.notice,x[p.NOTICE]);h.show(this.notice);}if(this.emailInput!==null){if(x[p.EMAIL_INPUT].error){o.set(this.emailInput,'error');}else o.unset(this.emailInput);var y=x[p.EMAIL_INPUT].value;if(y){this.emailInput.value=y;}else this.emailInput.value='';}if(this.passwordInput!==null){j.find(this.passwordInput,'input').value='';l.invoke('m:passwordinput:autoclear',q.INPUT);if(x[p.PASSWORD_INPUT].error){h.addClass(this.passwordInput,t);}else{o.unset(j.find(this.passwordInput,'input'));h.removeClass(this.passwordInput,t);}}this._autoFocusIfNeeded(w.payload);if(this.upsell!==null)j.hide(this.upsell);},redirect:function v(w){window.location.replace(w);}};f.exports=u;}),null);
__d('MLoginView',['DOM','DeferredCookie','MButton','ge','getPixelRatio','CSS','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o={disableOnSubmit:function p(q,r){h.listen(q,'submit',null,function(){i.flushAllCookies();j.setEnabled(r,false);setTimeout(j.setEnabled.bind(null,r,true),15000);});},showForm:function p(q,r){h.listen(q,'click',null,function(s){h.remove(q);m.removeClass(r,"_7tb");});}};f.exports=o;}),null);
__d('MPasswordPlainTextToggle',['CSS','MPasswordPlainTextToggleSigils','Stratcom','invariant'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l={init:function m(n,o,p,q){p!==null&&q!==null||k(0);j.listen('click',i.TOGGLE,function(r){if(n.type=='password'){n.type='text';h.hide(p);h.show(q);}else{n.type='password';h.hide(q);h.show(p);}r.kill();});j.listen(['m:passwordinput:autoclear','input'],i.INPUT,function(r){if(n.value==''){h.hide(o);}else h.show(o);});}};f.exports=l;}),null);
__d('CookieConsentBlacklist',['Parent'],(function a(b,c,d,e,f,g,h){'use strict';var i={isBlacklisted:function j(k){var l=k,m=h.byAttribute(l,'data-nocookies');if(m)return true;if(l.tagName.toLowerCase()!=='a')l=h.byTag(l,'a');if(l instanceof HTMLAnchorElement&&typeof l.href==='string'){var n=l.href;for(var o=0;o<this.blacklistedHrefs.length;o++)if(n.indexOf(this.blacklistedHrefs[o])>-1)return true;}return false;},blacklistedHrefs:['/help/cookies','/policy/cookies/','/policies/cookies/']};f.exports=i;}),null);
__d('MCookieUseBannerController',['CookieConsentBlacklist','DeferredCookie','DOM'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={init:function l(m,n){this.banner=m;this.closeButton=n;this.addPageInteractionListeners();if(n){var o=function p(){j.remove(m);};if(n.addEventListener){n.addEventListener('click',o);}else if(n.attachEvent)n.attachEvent('onclick',o);}},addPageInteractionListeners:function l(){var m=function(n){if(this.isTargetBlacklistedFromConsent(n.target))return;i.flushAllCookies();if(window.removeEventListener){window.removeEventListener('click',m,true);}else if(document.detachEvent)document.detachEvent('onclick',m);}.bind(this);if(window.addEventListener){window.addEventListener('click',m,true);}else if(document.attachEvent)document.attachEvent('onclick',m);i.removeDefaultInteractionListener();},isTargetBlacklistedFromConsent:function l(m){if(this.closeButton&&(m===this.closeButton||this.closeButton.contains(m)))return false;if(this.banner===m||this.banner.contains(m))return true;return h.isBlacklisted(m);}};f.exports=k;}),null);
__d('BrowserPushCommands',[],(function a(b,c,d,e,f,g){var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;}),null);
__d("BrowserPushMessageRedirectUtil",[],(function a(b,c,d,e,f,g){var h=function i(j){return true;};f.exports=h;}),null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','BrowserPushMessageRedirectUtil','EventListener','URI','URISchemes','isFacebookURI'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(event){if(event.data.command&&event.data.command===h.REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:h.ACK,success:true});}else{event.ports[0].postMessage({command:h.ACK,success:false});return;}var p=event.data.uri;if(/^([^.:/?#]+):/.test(p)&&!l.isAllowed(/^([^.:/?#]+):/.exec(p)[1])||!m(new k(p)))throw new Error('goURI: URI scheme rejected, URI: '+p);if(i(p))window.location.href=p;}}var o={registerRedirectHandler:function p(){j.listen(window,'message',function(event){if(event.origin==='')n(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))n(event);});}};f.exports=o;}),null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],(function a(b,c,d,e,f,g,h,i,j){function k(){new i(h.WINDOW_VISIBLE,null).sendViaController();}var l={listenForVisibility:function m(){if(!j.isHidden())k();j.addListener(j.VISIBLE,k);}};f.exports=l;}),null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=window.Notification,o=new k();p.get=function(q,r){'use strict';if(o.has(r))return o.get(r);var s=new p(q,r);o.set(r,s);return s;};function p(q,r){'use strict';this.$PushRegistration3=q;this.appID=r;if(!p.$PushRegistration1&&!p.$PushRegistration2){p.$PushRegistration1=false;p.$PushRegistration2=false;}}p.prototype.getPushSubscription=function(){'use strict';return new h(function(q,r){if(!n||n.permission==='denied')r(new Error('No permission or not supported'));l.getWorkerRegistration(this.$PushRegistration3).then(function(s){if(!s){q(null);return;}s.pushManager.getSubscription().then(function(t){q(t);})['catch'](r);})['catch'](r);}.bind(this));};p.prototype.$PushRegistration4=function(q){'use strict';var r=q.endpoint;if('subscriptionId' in q&&!new RegExp('/'+q.subscriptionId+'$').test(r))r+='/'+q.subscriptionId;return r;};p.prototype.$PushRegistration5=function(q,r,s,t){'use strict';var u=this.$PushRegistration4(s),v=q.getURIBuilder().getURI(),w=new r(v),x=null;if(s.toJSON){x=s.toJSON().keys;}else if(s.keys)x=s.keys;w.setData({app_id:this.appID,push_endpoint:u,subscription_keys:JSON.stringify(x)});w.setMethod('post');if(w.setHandler)w.setHandler(function(y){if(y.payload&&y.payload.session_change)t();});w.send();};p.prototype.getSubscription=function(){'use strict';return new h(function(q,r){this.getPushSubscription().then(function(s){if(s){q(this.$PushRegistration4(s));}else q(null);}.bind(this))['catch'](r);}.bind(this));};p.prototype.maybeRegisterPushAgain=function(q,r,s){'use strict';return new h(function(t,u){this.getPushSubscription().then(function(v){if(v){this.$PushRegistration5(q,r,v,s);t(this.$PushRegistration4(v));}else t(null);}.bind(this))['catch'](function(){t(null);});}.bind(this));};p.prototype.$PushRegistration6=function(q,r,s){'use strict';return new h(function(t,u){if(p.$PushRegistration2&&!s){u(new Error('sending disable info already'));return;}p.$PushRegistration2=true;var v=q.getURIBuilder().getURI(),w=new r(v.toString());w.setData({appid:this.appID,from_browser_settings:s});w.setMethod('post');if(w.listen){w.listen('finally',t);w.listen('fail',function(){p.$PushRegistration2=false;u();});}else if(w.setErrorHandler&&w.setHandler){w.setErrorHandler(function(){p.$PushRegistration2=false;u();});w.setHandler(t);}else t();w.send();}.bind(this));};p.prototype.isPushRegistered=function(q,r,s,t){var u=arguments.length<=4||arguments[4]===undefined?false:arguments[4],v=arguments.length<=5||arguments[5]===undefined?m:arguments[5],w=arguments.length<=6||arguments[6]===undefined?false:arguments[6];'use strict';i.registerRedirectHandler();return new h(function(x,y){this.getPushSubscription().then(function(z){x(!!z||q&&!p.pushPermissionIsPending());if(z){if(u){self.$PushRegistration5(r,t,v,w);}else j.listenForVisibility();}else if(!z&&q)if(p.pushPermissionIsOn()){this.registerPush(r,t,v,w)['catch'](function(){});}else this.$PushRegistration6(s,t,false);}.bind(this))['catch'](function(){if(q){this.$PushRegistration6(s,t,false);y();}if(w)l.unregisterControllingWorker();}.bind(this));}.bind(this));};p.prototype.$PushRegistration7=function(){'use strict';return new h(function(q,r){n.requestPermission(q);});};p.prototype.registerPushAndWaitForEndpoint=function(q,r,s,t){'use strict';return new h(function(u,v){this.$PushRegistration8(q,r,s,true,null,t).then(function(w){if(typeof w!=='string'){v(new Error('registerPushImpl did not return an endpoint'));return;}u(w);})['catch'](v);}.bind(this));};p.prototype.registerPushOnKaiOS=function(q,r,s){'use strict';return new h(function(t,u){s.waitForKaiOS().done(function(){s.registerPush(function(v){var w=JSON.parse(v.get('push_endpoint'));this.$PushRegistration5(q,r,w,m);t(this.$PushRegistration4(w));}.bind(this));}.bind(this));}.bind(this));};p.prototype.registerPush=function(q,r){var s=arguments.length<=2||arguments[2]===undefined?m:arguments[2],t=arguments.length<=3||arguments[3]===undefined?false:arguments[3];'use strict';return this.registerPushWithFinishedCallBack(q,r,s,null,t);};p.prototype.registerPushWithFinishedCallBack=function(q,r,s,t,u){'use strict';return new h(function(v,w){this.$PushRegistration8(q,r,s,false,t,u).then(function(x){if(typeof x!=='boolean'){w(new Error('registerPushImpl did not return a boolean'));return;}v(x);})['catch'](w);}.bind(this));};p.prototype.$PushRegistration8=function(q,r,s,t,u,v){'use strict';if(p.$PushRegistration1)return new h(function(w,x){x(new Error('registering already'));});p.$PushRegistration1=true;return new h(function(w,x){var y=l.registerWorkerIfUnregistered(this.$PushRegistration3),z=this.$PushRegistration7();h.all([y,z]).then(function(aa){var ba=aa[0];if(!p.pushPermissionIsOn()){if(v)ba.unregister();throw new Error('Push permission was denied');}if(!t)w(true);ba.pushManager.subscribe({userVisibleOnly:true}).then(function(ca){if(t)w(this.$PushRegistration4(ca));this.$PushRegistration5(q,r,ca,s);if(u)u();j.listenForVisibility();}.bind(this))['catch'](function(ca){p.$PushRegistration1=false;if(v)ba.unregister();x(ca);});}.bind(this))['catch'](function(aa){p.$PushRegistration1=false;x(aa);});}.bind(this));};p.prototype.unregisterPushAndSWOnKaiOS=function(q,r,s,t){'use strict';return new h(function(u,v){this.$PushRegistration6(q,r,t).then(function(){s.unregisterPush();u();})['catch'](v);}.bind(this));};p.prototype.unregisterPushAndSW=function(q,r){'use strict';return new h(function(s,t){this.$PushRegistration6(q,r,true).then(function(){l.unregisterControllingWorker().done(s);})['catch'](t);}.bind(this));};p.prototype.unregisterPushOnly=function(q,r){'use strict';return new h(function(s,t){this.getPushSubscription().then(function(u){if(u){u.unsubscribe().then(this.$PushRegistration6(q,r,true)).then(function(){s(true);})['catch'](t);}else t();}.bind(this))['catch'](t);}.bind(this));};p.pushPermissionIsPending=function(){'use strict';return window.Notification&&window.Notification.permission==='default';};p.pushPermissionIsOn=function(){'use strict';return window.Notification&&window.Notification.permission==='granted';};p.pushPermissionIsDenied=function(){'use strict';return window.Notification&&window.Notification.permission==='denied';};f.exports=p;}),null);
__d("XBrowserPushXOutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/push\/register\/service_worker\/",{});}),null);
__d('MNotificationsPushInstall',['Promise','BanzaiLogger','Stratcom','KaiOSController','MRequest','MobileAppDetect','PushRegistration','XBrowserPushXOutController','XPushRegisterServiceWorkerController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(event,s,t){var u={event:event,appid:s,surface:t};i.log('BrowserPushLoggerConfig',u);}var r={installHandler:function s(t,u){q('turn_on',t.appID,u);var v=void 0;if(m.is_kaios){v=t.registerPushOnKaiOS(p,l,k);}else{if(n.pushPermissionIsPending())j.invoke('m:notifications:push:install:showCurtain');v=t.registerPush(p,l,function(){},true);}return new h(function(w,x){v.then(function(){j.invoke('m:notifications:push:install:hideCurtain');q('install',t.appID,u);w(true);j.invoke('m:notifications:push:install:installed');return;})['catch'](function(y){j.invoke('m:notifications:push:install:hideCurtain');if(window.Notification&&window.Notification.permission==='denied'){q('deny',t.appID,u);}else q('install_ignore',t.appID,u);j.invoke('m:notifications:push:install:notInstalled');x(y);return;});});},xoutHandler:function s(t,u){return new h(function(v,w){q('xout',t.appID,u);var x=o.getURIBuilder().getURI(),y=new l(x);y.setMethod('post');y.listen('finally',v);y.listen('fail',w);y.send();});}};f.exports=r;}),null);
__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});}),null);
__d('MNotificationsDirectPrompt',['MobileAppDetect','MNotificationsPushInstall','MRequest','PushRegistration','XBrowserPushDisabledController','XPushRegisterServiceWorkerController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n={install:function o(p,q,r,s,t){var u=k.get(p,q);if(h.is_kaios){if(!r&&!s)i.installHandler(u,'prompt');return;}u.isPushRegistered(r,m,l,j,t,function(){},true).then(function(v){if(!v&&!s)i.installHandler(u,'prompt')['catch'](function(){i.xoutHandler(u,'prompt');});})['catch'](function(){});}};f.exports=n;}),null);
__d('MNotificationsPushInstallCurtain',['CSS','Stratcom'],(function a(b,c,d,e,f,g,h,i){var j='upsell_curtain',k=null;function l(){if(k instanceof HTMLElement)h.show(k);i.listen('click',j,m);}function m(){if(k instanceof HTMLElement)h.hide(k);}var n={startListening:function o(p){k=p;i.listen('m:notifications:push:install:showCurtain',null,l);i.listen('m:notifications:push:install:hideCurtain',null,m);}};f.exports=n;}),null);
__d('ServiceWorkerLoginAndLogout',['ClientServiceWorkerMessage'],(function a(b,c,d,e,f,g,h){function i(k){new h(k,null).sendViaController();}var j={login:function k(){i('login');},logout:function k(){i('logout');}};f.exports=j;}),null);
__d('ServiceWorkerLoginAndLogoutListener',['KaiOSController','MobileAppDetect','MRequest','PushRegistration','Stratcom','ServiceWorkerLoginAndLogout','XBrowserPushDisabledController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o={listen:function p(q,r,s,t){l.listen('click',q,function(){if(i.is_kaios){if(!t)return;var u=k.get(s,t);u.unregisterPushAndSWOnKaiOS(n,j,h,false);}else if(r==='login'){m.login();}else if(r==='logout'){m.logout();}else throw new Error('bad login type given');});}};f.exports=o;}),null);